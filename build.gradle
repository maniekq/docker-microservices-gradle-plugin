buildscript {
  repositories {
    maven {
      url 'https://plugins.gradle.org/m2/'
    }
  }
  dependencies {
    classpath 'com.gradle.publish:plugin-publish-plugin:0.9.0'
    classpath 'org.kt3k.gradle.plugin:coveralls-gradle-plugin:2.0.1'
  }
}

apply plugin: 'groovy'
apply plugin: 'com.gradle.plugin-publish'
apply plugin: 'jacoco'
apply plugin: 'com.github.kt3k.coveralls'

repositories {
  jcenter()
}

dependencies {
  compile gradleApi()
  compile localGroovy()

  testCompile 'org.spockframework:spock-core:1.0-groovy-2.3'
}

version = '1.6.1'
group = 'pl.greenpath.gradle.dockermicroservices'

pluginBundle {
  website = 'https://github.com/michalborek/docker-microservices-gradle-plugin'
  vcsUrl = 'https://github.com/michalborek/docker-microservices-gradle-plugin'
  description = 'Microservices gradle plugin'
  tags = ['docker', 'microservices']

  plugins {
    greetingsPlugin {
      id = 'pl.greenpath.gradle.docker.microservices'
      displayName = 'Docker Microservices Plugin'
    }
  }
}

jacocoTestReport {
  reports {
    xml.enabled = true // coveralls plugin depends on xml format report
    html.enabled = true
  }
}

task wrapper(type: Wrapper) {
  gradleVersion = '2.4'
}
